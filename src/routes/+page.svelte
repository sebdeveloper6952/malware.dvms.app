<script lang="ts">
	import Icon from '@iconify/svelte';
	import JobResultCard from '@lib/components/cards/JobResultCard.svelte';
	import { jobResultStore } from '@lib/stores/jobResults';
	import { onMount, onDestroy } from 'svelte';

	onMount(() => {
		jobResultStore.ref();
	});

	onDestroy(() => {
		jobResultStore.unref();
	});
</script>

<div class="w-full flex flex-col items-center">
	<div class="w-full md:max-w-screen-md flex flex-col gap-2">
		{#if $jobResultStore.length === 0}
			<div class="w-full flex flex-col justify-center items-center text-gray-600">
				<Icon icon="pixelarticons:debug-off" width="48" height="48" />
				<p class="text-lg">No recent scans</p>
			</div>
		{:else}
			<ul>
				{#each $jobResultStore as event}
					<li class="py-1 last:mb-20"><JobResultCard {event} /></li>
				{/each}
			</ul>
		{/if}
	</div>
</div>
