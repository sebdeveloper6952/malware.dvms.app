import { Nip90Input } from '@lib/models/Nip90Input';
import NDK, { NDKEvent, type NostrEvent } from '@nostr-dev-kit/ndk';

export class DVMJobRequestEvent extends NDKEvent {
	inputs: Nip90Input[] = [];

	constructor(ndk?: NDK, rawEvent?: NostrEvent) {
		super(ndk, rawEvent);

		const inputs = rawEvent?.tags.filter((t) => t[0] === 'i');
		if (inputs) this.inputs = inputs?.map((i) => new Nip90Input(i));
	}

	static from(ndkEvent: NDKEvent) {
		return new DVMJobRequestEvent(ndkEvent.ndk, ndkEvent.rawEvent());
	}
}
